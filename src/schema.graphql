###
 # @file schema.graphql
 # @copyright Copyright (c) 2018-2019 Dylan Miller and dfinityexplorer contributors
 # @license MIT License
 ##

# import BlockOrderByInput, BlockSubscriptionPayload, TransactionOrderByInput, TransactionSubscriptionPayload, NetworkStatisticsSubscriptionPayload, PriceSubscriptionPayload from "./generated/prisma.graphql"

# Queries
type Query {
  blocks(first: Int, orderBy: BlockOrderByInput): [Block!]!
  block(height: Int!): Block
  transactions(first: Int, orderBy: TransactionOrderByInput): [Transaction!]!
  transaction(hash: String!): Transaction
  searchGetType(query: String!): SearchGetTypeResult!
  searchAutoComplete(query: String!, first: Int): SearchAutoCompleteResult!
  networkStatistics: NetworkStatistics!
  price: Price!
}

# Mutations
# Do not expose mutations on deployed server.
# type Mutation {
#  createBlock(height: Int!, timestamp: String!): Block!
#  createTransaction(hash: String!, amount: Float!, blockId: ID!): Transaction!
#  createNetworkStatistics(secondsPerBlock: Float!, transactionsPerSecond: Float!, blockHeight: Int!): NetworkStatistics!
#  createPrice(timestamp: String!, price: Float!): Price!
# }

# Subscriptions
type Subscription {
  block: BlockSubscriptionPayload
  transaction: TransactionSubscriptionPayload
  networkStatistics: NetworkStatisticsSubscriptionPayload
  price: PriceSubscriptionPayload
}

# An interface which custom types should implement.
interface Node {
  id: ID!
}

# Represents a DFINITY block.
type Block implements Node {
  id: ID!
  height: Int!
  timestamp: String!
  transactions: [Transaction!]!
  numTransactions: Int!
}

# Represents a DFINITY transaction.
type Transaction implements Node {
  id: ID!
  hash: String!
  amount: Float!
  block: Block!
}

# Represents DFINITY network statistics.
type NetworkStatistics {
  secondsPerBlock: Float!
  transactionsPerSecond: Float!
  block: Block!
}

# Represents the DFN price at a given time.
type Price {
  timestamp: String!
  price: Float!
}

# Holds a searchGetType result.
type SearchGetTypeResult {
  type: String!
}

# Holds a searchAutoComplete result.
type SearchAutoCompleteResult {
  items: [String!]!
}
